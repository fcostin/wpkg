<?xml version="1.0" encoding="UTF-8"?>
<packages>

<package
  id="gtalk"
  name="Google Talk"
  revision="%version%-1"
  priority="10"
  reboot="false">

  <variable name="version" value="1.0.0.104" />

  <check type="logical" condition="or">
    <check type="file" condition="versiongreaterorequal" path="%PROGRAMFILES%\Google\Google Talk\googletalk.exe" value="%version%" />
    <check type="file" condition="versiongreaterorequal" path="%PROGRAMFILES(x86)%\Google\Google Talk\googletalk.exe" value="%version%" />
  </check>

  <install cmd='"%SOFTWARE%\Google Talk\googletalk-setup.exe" /S' />
  <install cmd='taskkill /f /IM googletalk.exe'><exit code="any" /></install>
  <install cmd='REG DELETE "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run" /v googletalk /f' />

  <upgrade cmd='"%SOFTWARE%\Google Talk\googletalk-setup.exe" /S' />
  <upgrade cmd='taskkill /f /IM googletalk.exe'><exit code="any" /></upgrade>
  <upgrade cmd='REG DELETE "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run" /v googletalk /f' />

  <downgrade cmd='"%SOFTWARE%\Google Talk\googletalk-setup.exe" /S' />
  <downgrade cmd='taskkill /f /IM googletalk.exe'><exit code="any" /></downgrade>
  <downgrade cmd='REG DELETE "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run" /v googletalk /f' />

  <remove cmd='taskkill /f /IM googletalk.exe'><exit code="any" /></remove>
  <remove cmd='%COMSPEC% /c IF EXIST "%PROGRAMFILES%\Google\Google Talk\uninstall.exe" "%PROGRAMFILES%\Google\Google Talk\uninstall.exe" /S' />
  <remove cmd='%COMSPEC% /c IF EXIST "%PROGRAMFILES(x86)%\Google\Google Talk\uninstall.exe" "%PROGRAMFILES%\Google\Google Talk\uninstall.exe" /S' />

</package>
</packages>

<?xml version="1.0" encoding="UTF-8"?>

<!--
  NOTES
  1) When running as standard user, the program will fail with a message about being unable to add to addressbook. This is because of permissions and why we set them using cacls
  2) Notice the casing of "BroadBand" in the check
 -->

<packages>

<package
  id="singtel"
  name="SingTel Broadband on Mobile"
  revision="%version%-2"
  priority="10"
  reboot="false">

  <variable name="version" value="11.302.09.37.88" />

  <check type="uninstall" condition="versiongreaterorequal" path="BroadBand on Mobile" value='%version%' />

  <install cmd='"%SOFTWARE%\SingTel\Broadband on Mobile\Setup.exe" /S' />
  <install cmd='cacls "%ALLUSERSPROFILE%\Application Data\Microsoft\Network\Connections" /E /T /G Everyone:f >NUL'><exit code="8023" /></install>

  <upgrade cmd='"%SOFTWARE%\SingTel\Broadband on Mobile\Setup.exe" /S' />
  <upgrade cmd='cacls "%ALLUSERSPROFILE%\Application Data\Microsoft\Network\Connections" /E /T /G Everyone:f >NUL'><exit code="8023" /></upgrade>

  <downgrade cmd='"%SOFTWARE%\SingTel\Broadband on Mobile\Setup.exe" /S' />
  <downgrade cmd='cacls "%ALLUSERSPROFILE%\Application Data\Microsoft\Network\Connections" /E /T /G Everyone:f >NUL'><exit code="8023" /></downgrade>

  <remove cmd='%COMSPEC% /C IF EXIST "%PROGRAMFILES%\Broadband on Mobile\uninst.exe" "%PROGRAMFILES%\Broadband on Mobile\uninst.exe" /S' />
  <remove cmd='%COMSPEC% /C IF EXIST "%PROGRAMFILES%\Broadband on Mobile" RD /Q /S "%PROGRAMFILES%\Broadband on Mobile"' />
  <remove cmd='%COMSPEC% /C IF EXIST "%PROGRAMFILES(x86)%\Broadband on Mobile\uninst.exe" "%PROGRAMFILES(x86)%\Broadband on Mobile\uninst.exe" /S' />
  <remove cmd='%COMSPEC% /C IF EXIST "%PROGRAMFILES(x86)%\Broadband on Mobile" RD /Q /S "%PROGRAMFILES(x86)%\Broadband on Mobile"' />
</package>

</packages>

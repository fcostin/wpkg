<?xml version="1.0" encoding="UTF-8"?>

<packages>

<!--
  NOTES
  1) There is no uninstaller on purpose. The drivers actually support being uninstalled, but a minor config error like removing this package from a profile will render all machines depending on this driver unbootable, so for safety's sake I have not added it in.
  2) I disabled the reboot as it does it EVERY TIME we touch anything in this package

-->

<package
  id="intel_sata"
  name="Intel SATA drivers"
  revision="%version%-6"
  priority="10"
  reboot="false">

  <variable name="version" value="10.1.0.1008" />
  <variable name="flags" value="-s -noservice -notray -overwrite" /> <!-- only install drivers - create a new profile for bells and whistles -->

  <check type="uninstall" condition="versiongreaterorequal" path="Intel(R) Rapid Storage Technology" value="%version%" />

  <install   cmd='"%SOFTWARE%\Intel\iata_enu.exe" %flags%' />
  <install   cmd='"%SOFTWARE%\Intel\iata_enu.exe" -s -a -p "%systemdrive%\DRIVERS\intel_sata"' />
  <install   cmd='reg delete "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run" /v "IAStorIcon" /f' />
  <upgrade   cmd='"%SOFTWARE%\Intel\iata_enu.exe" %flags%' />
  <upgrade   cmd='"%SOFTWARE%\Intel\iata_enu.exe" -s -a -p "%systemdrive%\DRIVERS\intel_sata"' />
  <upgrade   cmd='reg delete "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run" /v "IAStorIcon" /f' />
  <downgrade cmd='"%SOFTWARE%\Intel\iata_enu.exe" %flags%' />
  <downgrade cmd='"%SOFTWARE%\Intel\iata_enu.exe" -s -a -p "%systemdrive%\DRIVERS\intel_sata"' />
  <downgrade cmd='reg delete "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run" /v "IAStorIcon" /f' />
</package>

</packages>

<?xml version="1.0" encoding="UTF-8"?>

<!--
  NOTES
  1) We do not provide upgrade stanzas as subsequent upgrades will be handled by WSUS/WU
-->

<packages>

<package
  id="dotnet1"
  name="Microsoft .NET 1.1"
  revision="4"
  reboot="false"
  priority="50">

  <check type="uninstall" condition="exists" path="Microsoft .NET Framework 1.1" />

  <install cmd='"%SOFTWARE%\Microsoft\DotNet\dotnetfx.exe" /Q /C /T:"%TEMP%\net1"' />
  <install cmd='msiexec %MSI% /i "%TEMP%\net1\netfx.msi"' />

</package>

 <!-- .NET 3.5.1 is preinstalled on Win7 -->

<package
  id="dotnet3"
  name="Microsoft .NET 3.5 SP1"
  revision="6"
  reboot="false"
  priority="50">

  <check type="logical" condition="or">
    <check type="uninstall" condition="exists" path="Microsoft .NET Framework 3.5 SP1" />
    <check type="registry" condition="equals" path="HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\CurrentVersion" value="6.1" />
  </check>

  <install cmd='"%SOFTWARE%\Microsoft\DotNet\dotnetfx35.exe" /lang:ENU %MSI%'>
    <exit code="194" reboot="false" />
    <exit code="1603" />
    <exit code="3010" reboot="false" />
  </install>
  <install cmd='"%SOFTWARE%\Microsoft\DotNet\NDP20SP2-KB958481-x86.exe" %MSI%'>
    <exit code="-2147021886" reboot="false" />
  </install>
  <install cmd='"%SOFTWARE%\Microsoft\DotNet\NDP30SP2-KB958483-x86.exe" %MSI%' />
  <install cmd='"%SOFTWARE%\Microsoft\DotNet\NDP35SP1-KB958484-x86.exe" %MSI%' />

  <remove cmd='"%WINDIR%\Microsoft.NET\Framework\v3.5\Microsoft .NET Framework 3.5 SP1\setup.exe" /uninstall %MSI%' />

</package>

<package
  id="dotnet4"
  name="Microsoft .NET 4"
  revision="1"
  reboot="false"
  priority="50">

  <variable name="PKG_SOURCE" value="%SOFTWARE%\Microsoft\DotNet\dotNetFx40_Full_x86_x64.exe" />
  <variable name="PKG_DESTINATION" value="%TEMP%\dotNetFx40_Full_x86_x64.exe" />

  <check type="uninstall" condition="exists" path="Microsoft .NET Framework 4 Client Profile" />

  <install cmd='%COMSPEC% /c XCOPY /Y "%PKG_SOURCE%" "%PKG_DESTINATION%"' />
  <install cmd='"%PKG_DESTINATION%" /q /norestart /log "%TEMP%\dotnet4.txt"' timeout="900">
    <exit code="1614" reboot="false" />
    <exit code="3010" reboot="false" />
  </install>

  <remove cmd='"%windir%\Microsoft.NET\Framework64\v4.0.30319\SetupCache\Extended\setup.exe" /uninstall /x86 /x64 /ia64 /parameterfolder Extended /q' />
  <remove cmd='"%windir%\Microsoft.NET\Framework64\v4.0.30319\SetupCache\Client\setup.exe" /uninstall /x86 /x64 /parameterfolder Client' />

</package>

</packages>

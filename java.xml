<?xml version="1.0" encoding="UTF-8"?>

<packages>

<package
  id="java"
  name="Java 6"
  revision="1621"
  reboot="false"
  priority="10">

  <check type="uninstall" condition="exists" path="Java(TM) 6 Update 21" />

  <install cmd='net STOP JavaQuickStarterService' >
    <exit code='2' />
  </install>
  <install cmd='%COMSPEC% /C IF "%PROCESSOR_ARCHITECTURE%" == "x86"   "%SOFTWARE%\Java\jre-6u21-windows-i586-s.exe" %MSI%'>
    <exit code="3010" />
    <exit code="0" />
  </install>
  <install cmd='%COMSPEC% /C IF "%PROCESSOR_ARCHITECTURE%" == "AMD64" "%SOFTWARE%\Java\jre-6u21-windows-x64.exe" %MSI%'>
    <exit code="3010" />
    <exit code="0" />
  </install>
  <install cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Update\Policy" /v EnableAutoUpdateCheck /t REG_DWORD /d 0 /f' />
  <install cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Update\Policy" /v EnableJavaUpdate /t REG_DWORD /d 0 /f' />
  <install cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Runtime Environment\1.6.0_21" /v JavaHome /d "%PROGRAMFILES%\Java\jre6" /f' />
  <install cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Plug-in\1.6.0_21" /v JavaHome /d "%PROGRAMFILES%\Java\jre6" /f' />
  <install cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Web Start\1.6.0_21" /v JavaHome /d "%PROGRAMFILES%\Java\jre6" /f' />
  <install cmd='REG ADD HKLM\SYSTEM\CurrentControlSet\Services\JavaQuickStarterService /v Start /d 4 /f' />
  <install cmd='net STOP JavaQuickStarterService' >
   <exit code='2' />
  </install>

  <upgrade cmd='net STOP JavaQuickStarterService' >
   <exit code='2' />
  </upgrade>
  <upgrade cmd='%COMSPEC% /C IF "%PROCESSOR_ARCHITECTURE%" == "x86"   "%SOFTWARE%\Java\jre-6u21-windows-i586-s.exe" %MSI%'>
    <exit code="3010" />
    <exit code="0" />
  </upgrade>
  <upgrade cmd='%COMSPEC% /C IF "%PROCESSOR_ARCHITECTURE%" == "AMD64" "%SOFTWARE%\Java\jre-6u21-windows-x64.exe" %MSI%'>
    <exit code="3010" />
    <exit code="0" />
  </upgrade>
  <upgrade cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Update\Policy" /v EnableAutoUpdateCheck /t REG_DWORD /d 0 /f' />
  <upgrade cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Update\Policy" /v EnableJavaUpdate /t REG_DWORD /d 0 /f' />
  <upgrade cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Runtime Environment\1.6.0_21" /v JavaHome /d "%PROGRAMFILES%\Java\jre6" /f' />
  <upgrade cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Plug-in\1.6.0_21" /v JavaHome /d "%PROGRAMFILES%\Java\jre6" /f' />
  <upgrade cmd='REG ADD "HKLM\SOFTWARE\JavaSoft\Java Web Start\1.6.0_21" /v JavaHome /d "%PROGRAMFILES%\Java\jre6" /f' />
  <upgrade cmd='REG ADD HKLM\SYSTEM\CurrentControlSet\Services\JavaQuickStarterService /v Start /d 4 /f' />

  <remove cmd='net STOP JavaQuickStarterService' >
    <exit code='2' />
  </remove>

</package>

</packages>
